<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery Mobile: SU Demo</title>
	
	<link rel="stylesheet"  href="css/jquery.mobile-1.1.1.css" />
    <link rel="stylesheet"  href="css/mapapp.css" />
        
        
	<script src="cordova-2.0.0.js"></script>
	<script src="js/jquery-1.8.1.js"></script>
	<script src="js/jquery.mobile-1.1.1.js"></script>
	
	
	<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script src="js/jquery.ui.map/jquery.ui.map.js"></script>
	<script src="js/jquery.ui.map/jquery.ui.map.services.js"></script>
    <script src="js/mapapp.complete.js"></script>
    <script type="text/javascript" charset="utf-8" src="childbrowser.js"></script>
    
	
	<style>
		.ui-content {
			padding: 0;
		}
		
		.ui-grid-c > *:nth-child(n) {
			padding: 15px;
		}
		
		.ui-field-contain, .ui-mobile fieldset.ui-field-contain {
			margin: 0.2em 0;
		}
		
		.ui-field-contain label.ui-select {
			vertical-align: inherit;
			width: inherit;
		}
		
		.ui-header .ui-btn-left, .ui-header .ui-btn-right, .ui-footer .ui-btn-left, .ui-footer .ui-btn-right {
			top: inherit;
		}
		
		.ui-field-contain .ui-select {
		    width: inherit;
		    display: inline-block;
		}		
	</style>
	
</head>
<body>
    
<div data-role="page" class="type-home" id="page-home" style="background-image: url(img/su-app-background.png);">
	<div data-role="content">
		<p class="jqm-version"></p>
		
		
		<!-- Home -->
	    <div data-role="content" style="/*padding: 15px*/">
	        <div class="ui-grid-c">
	            <div class="ui-block-a">
					<a href="http://www-test.su.se"><img src="img/icons/Address_Book.png"></a>
	            </div>
	            <div class="ui-block-b">
					<a href="http://www-test.su.se"><img src="img/icons/Announcement.png"></a>
	            </div>
	            <div class="ui-block-c">
					<a href="appLaud.html"><img src="img/icons/Calender.png"></a>
	            </div>
	            <div class="ui-block-d">
					<img src="img/icons/Chat.png">
	            </div>
	            <div class="ui-block-a">
					<img src="img/icons/Key.png">
	            </div>
	            <div class="ui-block-b">
					<img src="img/icons/Mail_Read.png">
	            </div>
	            <div class="ui-block-c">
					<a href="#page-map"><img id="map-button" src="img/icons/maps.png"></a>
	            </div>
	            <div class="ui-block-d">
					<img src="img/icons/Portfolio.png">
	            </div>
	            <div class="ui-block-a">
					<img src="img/icons/Search.png">
	            </div>
	            <div class="ui-block-b">
					<img src="img/icons/Stats.png">
	            </div>
	            <div class="ui-block-c">
					<a href="#page-camera"><img src="img/icons/System.png"></a>
	            </div>
	            <div class="ui-block-d">	              
					<a onclick="ontap=openChildBrowser('http://www-test.su.se',null)"><img src="img/icons/Web.png"></a>									
	            </div>
				<div class="ui-block-a">
					<a onclick="ontap=openChildBrowser('http://www.sub.su.se/mobil',null)"><img src="img/icons/Library.png"></a>
	            </div>
	            
	           
	            
	        </div>
	    </div>

	</div>

</div>

    
<div data-role="page" data-theme="c" data-fullscreen="true" id="page-map">

    <div data-theme="c" data-role="header" data-position="inline">
        <div data-role="fieldcontain">
            <select name="destination" id="destination">
                <option value="-">
                    Destination
                </option>
                <option value="su-south">
                    SU Södra
                </option>
                <option value="su-north">
                    SU Norra
                </option>
                <option value="kraftriket">
                    Kräftriket
                </option>
            </select>
            
            <div data-role="fieldcontain" style="position: absolute; top: -7px; left: 40%; margin: 0; padding: 0">            
	            <input name="" id="choosePOI" type="checkbox">
	            <label for="choosePOI">POI</label>
            </div>
            
            <div data-role="fieldcontain" style="position: absolute; top: 0; right: 0; margin: 0; padding: 0">
		        <a id="getDirections" data-role="button" data-transition="fade" href="javascript://nop" 
		        	class="ui-btn-right" data-icon="search" data-iconpos="left">
		            Directions
		        </a>
	        </div>
        </div>
    </div>

		<!-- Hidden until get to work with street view microformat -->
		<div class="vevent" style="display: none">
			<a href="#spinaltap" class="url summary">Spinal Tap</a> 
			<span class="description">
				After their highly-publicized search for
				a new drummer, Spinal Tap kicks off their latest comeback tour with
				a San Francisco show.
			</span> 
			When: 
			<span class="dtstart"> 
				Oct 15,7:00PM<span class="value-title" title="2015-10-15T19:00-08:00"></span>
			</span>- 
			<span class="dtend"> 
				9:00PM<span class="value-title" title="2015-10-15T21:00-08:00"></span>
			</span> 
			Where:
			<div class="location vcard">
				<span class="fn org">Warfield Theatre</span>, 
				<span class="adr">
					<span class="street-address">982 Market St</span>, 
					<span class="locality">San Francisco</span>, 
					<span class="region">CA</span>
				</span> 
				<span class="geo"> 
					<span class="latitude"> 
						<span class="value-title" title="37.774929"></span>
					</span> 
					<span class="longitude"> 
						<span class="value-title" title="-122.419416"></span>
					</span>
				</span>
			</div>
		</div>

	<div data-role="content" id="map-content">
        <div id="map_canvas"></div>
    </div><!-- /content -->

    <div data-role="footer" data-theme="c" data-position="fixed" data-tap-toggle="false">
        <div data-role="navbar">
            <ul>
                <li><a href="#page-home">Home</a></li>
                <li><a href="#page-map" class="refresh">Refresh</a></li>
                <li><a href="#page-dir">Directions</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->
</div><!-- /page-map -->

    
<div data-role="page" data-theme="c" data-fullscreen="true" id="page-dir">

    <div data-role="content">
        <div id="dir_panel"></div>
    </div><!-- /content -->

    <div data-role="footer" data-theme="d" data-position="fixed" data-tap-toggle="false">
        <div data-role="navbar">
            <ul>
            <li><a href="#page-home">Home</a></li>
            <li><a href="#page-map">Map</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->
</div><!-- /page-dir -->


<script>
	$( document ).bind( "mobileinit", function() {
	    // Make your jQuery Mobile framework configuration changes here!
		$.support.cors = true;
	    $.mobile.allowCrossDomainPages = true;
	});


   function openChildBrowser(url) {
	   window.plugins.childBrowser.showWebPage(url, { showLocationBar: true });
	   /*
       try {
    	   var childBrowser;
    	   childBrowser = new ChildBrowser();
           childBrowser.showWebPage(url);
          
       }
       catch (err)
       {
           alert(err);
       }
       */
   }
  
   window.plugins.childBrowser.onClose = function () {
	    window.plugins.childBrowser.close();
	};
	
</script>
    
    
   <div data-role="page"  data-fullscreen="true" id="page-camera"> 
    
    
    <button onclick="capturePhoto();">Capture Photo</button> <br>
    
    
    
    <!-- 
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
     -->
    <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    <img style="display:none;" id="largeImage" src="" />  
    
   </div> 
    
    
        <script type="text/javascript" charset="utf-8">

    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 

    // Wait for PhoneGap to connect with the device
        
    document.addEventListener("deviceready",onDeviceReady,false);

    // PhoneGap is ready to be used!
    //
    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoDataSuccess(imageData) {
      // Uncomment to view the base64 encoded image data
      // console.log(imageData);

      //alert(imageData);
      
      // Get image handle
  
      var smallImage = document.getElementById('smallImage');

      // Unhide image elements
      
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      
   //  smallImage.src = "data:image/jpeg;base64," + imageData;
   
  // #page-map
   	
	$.mobile.changePage($('#page-map'), {data:imageData, type: "post"});
  	
   
      smallImage.src =  imageData;
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoURISuccess(imageURI) {
      // Uncomment to view the image file URI 
      // console.log(imageURI);
		
      // Get image handle
      //
      var largeImage = document.getElementById('largeImage');

      // Unhide image elements
      //
      largeImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      largeImage.src = imageURI;
    }

    // A button will call this function
    //
    function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
     navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
           
    }

    // A button will call this function
    //
    function capturePhotoEdit() {
      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true }); 
    }

    // A button will call this function
    //
    function getPhoto(source) {
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
        destinationType: destinationType.FILE_URI,
        sourceType: source });
    }

    // Called if something bad happens.
    // 
    function onFail(message) {
      alert('Failed because: ' + message);
    }

    </script>
    
    
</body>
</html>
